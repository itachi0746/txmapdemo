(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appraise-appraise"],{"2efd":function(t,e,i){t.exports=i.p+"static/driver.png"},"2fc1":function(t,e,i){"use strict";i.r(e);var a=i("a146"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},5347:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var a={uniIcons:i("3e6c").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"main"},[a("v-uni-view",{staticClass:"orderInfo"},[a("v-uni-view",{staticClass:"title"},[t._v("送货信息")]),a("v-uni-view",{staticClass:"detail"},[a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[t._v("送货单号")]),a("v-uni-view",[t._v(t._s(t.detail.deliveryNo))])],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[t._v("车牌号码")]),a("v-uni-view",[t._v(t._s(t.carNo))])],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[t._v("司机姓名")]),a("v-uni-view",[t._v(t._s(t.detail.driverName))])],1),a("v-uni-view",{staticClass:"list",staticStyle:{"flex-wrap":"wrap","border-bottom":"none"}},[a("v-uni-view",{staticClass:"label"},[t._v("星级评价")]),a("v-uni-view",{staticClass:"list-item"},[a("v-uni-image",{attrs:{src:i("2efd")}}),a("v-uni-view",{staticClass:"item",staticStyle:{"margin-left":"15px"}},[a("v-uni-view",{staticClass:"subtext"},[t._v("请为这次服务满意程度打分")]),t._l(t.starts,(function(e,i){return a("v-uni-view",{key:i,staticClass:"start"},[e.check?a("uni-icons",{attrs:{type:"star-filled",size:"30",color:"#ffcc33"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setStar(i)}}}):a("uni-icons",{attrs:{type:"star",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setStar(i)}}})],1)}))],2)],1)],1)],1)],1),a("v-uni-view",{staticClass:"textarea"},[a("v-uni-textarea",{attrs:{disabled:t.detail.isComment,"placeholder-class":"placeholderclass",placeholder:"你对本次服务有何评价和意见？欢迎留言，以便改进我们的服务"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1),a("v-uni-view",{staticStyle:{"background-color":"#fff"}},[t.detail.isComment?a("v-uni-button",{staticClass:"default"},[t._v("已评价")]):a("v-uni-button",{staticClass:"primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendAppraise.apply(void 0,arguments)}}},[t._v("发布评价")])],1)],1)},r=[]},7804:function(t,e,i){var a=i("c84b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("b1926852",a,!0,{sourceMap:!1,shadowMode:!1})},"80b0":function(t,e,i){"use strict";i.r(e);var a=i("5347"),n=i("2fc1");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("e6fe");var s=i("828b"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"54ed51bc",null,!1,a["a"],void 0);e["default"]=c.exports},a146:function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("aa77"),i("bf0f"),i("8f71");var n=a(i("2634")),r=a(i("2fdc")),s={data:function(){return{starts:[{check:!0},{check:!0},{check:!0},{check:!0},{check:!1}],content:"",carNo:"",deliveryNo:"",detail:""}},onLoad:function(t){t.carNo&&t.deliveryNo&&(this.carNo=t.carNo,this.deliveryNo=t.deliveryNo,this.loadData(t.carNo,t.deliveryNo))},methods:{loadData:function(t,e){var i=this;return(0,r.default)((0,n.default)().mark((function a(){var r;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return uni.showLoading({title:"loading",mask:!0}),a.next=3,i.api.post("getDeliveryInfo",{carNo:t,deliveryNo:e});case 3:if(r=a.sent,uni.hideLoading(),r){a.next=7;break}return a.abrupt("return");case 7:i.detail=r.data;case 8:case"end":return a.stop()}}),a)})))()},setStar:function(t){if(!this.detail.isComment)if(this.starts[t].check=!this.starts[t].check,this.starts[t].check)for(var e=t-1;e>=0;e--)this.starts[e].check=!0;else for(var i=t+1;i<=4;i++)this.starts[i].check=!1},sendAppraise:function(){if(!this.starts.find((function(t){return 1==t.check})))return this.error("请选择星级");if(!this.content)return this.error("请填写评价内容");var t=this.starts.filter((function(t){return 1==t.check}));t=t.length;var e=this;uni.showModal({title:"提示",content:"确定要提交评价内容？",success:function(){var i=(0,r.default)((0,n.default)().mark((function i(a){var r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!a.confirm){i.next=10;break}return uni.showLoading({title:"loading"}),i.next=4,e.api.post("addComment",{star:t,content:e.content,carNo:e.carNo,deliveryNo:e.deliveryNo});case 4:if(r=i.sent,uni.hideLoading(),r){i.next=8;break}return i.abrupt("return");case 8:e.success("评价成功"),setTimeout((function(){uni.redirectTo({url:"../myappraise/myappraise?carNo="+e.carNo+"&deliveryNo="+e.deliveryNo})}),1500);case 10:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()})},back:function(){uni.navigateTo({url:"../dealers/dealers"})}}};e.default=s},c84b:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-54ed51bc]{display:flex;flex-direction:column;padding:6px;height:calc(100vh - 44px);box-sizing:border-box;overflow-y:auto;background-color:#ededed}.main[data-v-54ed51bc]{width:100%;margin:0 auto;flex:1;overflow-y:auto;background-color:#fff}.main .msg[data-v-54ed51bc]{color:#555}.main .orderInfo[data-v-54ed51bc]{margin:10px}.main .orderInfo .title[data-v-54ed51bc]{font-size:20px;margin:5px;border-left:4px solid #ed6622;font-weight:600;padding-left:8px}.main .orderInfo .detail .list[data-v-54ed51bc]{padding:15px 4px;border-bottom:1px solid #dedede;display:flex;justify-content:space-between}.main .orderInfo .detail .list .list-item[data-v-54ed51bc]{display:flex;align-items:center;margin-top:20px}.main .orderInfo .detail .list .list-item uni-image[data-v-54ed51bc]{height:80px;width:80px}.main .orderInfo .detail .list .list-item .start[data-v-54ed51bc]{margin-right:10px;display:inline-block}.main .orderInfo .detail .label[data-v-54ed51bc]{min-width:100px}.main .textarea[data-v-54ed51bc]{padding:15px;background-color:#fff}.main uni-textarea[data-v-54ed51bc]{width:100%}',""]),t.exports=e},e6fe:function(t,e,i){"use strict";var a=i("7804"),n=i.n(a);n.a}}]);