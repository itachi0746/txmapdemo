(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-arrive-arrive"],{"109e":function(e,a,i){"use strict";i.d(a,"b",(function(){return r})),i.d(a,"c",(function(){return n})),i.d(a,"a",(function(){return t}));var t={uniIcons:i("3e6c").default},r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"main"},[e.detail?t("v-uni-view",{staticClass:"orderInfo"},[t("v-uni-view",{staticClass:"title"},[e._v("送货单信息")]),t("v-uni-view",{staticClass:"detail"},[t("v-uni-view",{staticClass:"list"},[t("v-uni-view",{staticClass:"label"},[e._v("送货单编号")]),t("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.deliveryNo))])],1),t("v-uni-view",{staticClass:"list"},[t("v-uni-view",{staticClass:"label"},[e._v("物流单编号")]),t("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.orderChildNo))])],1),t("v-uni-view",{staticClass:"list"},[t("v-uni-view",{staticClass:"label"},[e._v("目的地")]),t("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.targetAreaName))])],1),t("v-uni-view",{staticClass:"list"},[t("v-uni-view",{staticClass:"label"},[e._v("客户简称")]),t("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.customerName))])],1),t("v-uni-view",{staticClass:"list"},[t("v-uni-view",{staticClass:"label"},[e._v("客户地址")]),t("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.address))])],1),e.pickerArray.length?t("v-uni-view",{staticClass:"line d-flex jusb"},[t("v-uni-view",{staticClass:"line-l"},[e._v("车牌号码")]),t("v-uni-view",{staticClass:"line-r d-flex"},[t("v-uni-picker",{attrs:{value:e.pickerIndex,range:e.pickerArray,"range-key":"name"},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.bindPickerChange.apply(void 0,arguments)}}},[t("v-uni-view",{},[t("v-uni-text",[e._v(e._s(e.pickerArray[e.pickerIndex].name))]),t("v-uni-text",{staticClass:"uni-input"},[e._v(e._s("共"+e.pickerArray.length+"辆"))])],1)],1),t("uni-icons",{attrs:{type:"arrowright",size:"12",color:"#999999"}})],1)],1):e._e(),e.pickerArray.length?t("v-uni-view",{staticClass:"line d-flex jusb"},[t("v-uni-view",{staticClass:"line-l"},[e._v("司机信息")]),t("v-uni-view",{staticClass:"line-r"},[t("v-uni-text",[e._v(e._s(e.pickerArray[e.pickerIndex].driverName))]),t("uni-icons",{staticClass:"phone-icon",attrs:{color:"#ed6622",type:"phone-filled",size:"16"}})],1)],1):e._e(),e.isArrive?t("v-uni-view",{staticClass:"list"},[t("v-uni-view",{staticClass:"label"},[e._v("送达时间")]),t("v-uni-view",{staticClass:"value"},[e._v(e._s(e.arrivedTime))])],1):e._e()],1)],1):e._e(),e.empty?t("v-uni-view",{staticClass:"empty",staticStyle:{flex:"1"}},[t("v-uni-image",{attrs:{src:i("1e21"),mode:""}}),t("v-uni-view",{staticStyle:{margin:"10px 0px",color:"#ed6622"}},[e._v("暂无送货单信息")]),t("v-uni-view",{staticClass:"subtext"},[e._v("试试搜索送货单号")])],1):e._e(),e.isArrive?t("v-uni-view",{staticClass:"success"},[t("v-uni-view",{staticClass:"title"},[e._v("货物已经确认送达！")])],1):e._e(),t("v-uni-view",{staticClass:"loca-div"},[t("v-uni-text",[e._v("当前位置:"+e._s(e.location))])],1),t("v-uni-view",{staticClass:"map-div"},[t("v-uni-map",{staticStyle:{width:"100%",height:"100%"},attrs:{latitude:e.latitude,longitude:e.longitude,markers:e.covers,"enable-scroll":!1}})],1)],1),t("v-uni-view",{staticClass:"btn-div"},[e.detail?t("v-uni-button",{staticClass:"btn font14 default",attrs:{plain:"true"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.back.apply(void 0,arguments)}}},[e._v("稍后确认")]):e._e(),!e.isArrive&&e.detail&&e.latitude&&e.pickerArray[e.pickerIndex].isComment?t("v-uni-button",{staticClass:"btn font14 primary",attrs:{disabled:e.pickerArray[e.pickerIndex].isArrived},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.arrive.apply(void 0,arguments)}}},[e._v("确认送达")]):e._e()],1)],1)},n=[]},1336:function(e,a,i){var t=i("c86c");a=t(!1),a.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-4f2aced2]{padding:%?20?%;display:flex;flex-direction:column;height:calc(100vh - 44px);overflow-y:auto;border-top:1px solid #ebeef5;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.header[data-v-4f2aced2]{padding:10px;position:relative}.header .searchIcon[data-v-4f2aced2]{position:absolute;left:20px;top:15px}.header .scanIcon[data-v-4f2aced2]{position:absolute;right:20px;top:15px}.header .search[data-v-4f2aced2]{border:1px solid #ebeef5;border-radius:18px;height:32px;line-height:32px;padding-left:33px;padding-right:40px}.main[data-v-4f2aced2]{width:100%;margin:0 auto;flex:1;overflow-y:auto}.main .msg[data-v-4f2aced2]{color:#555}.main .orderInfo[data-v-4f2aced2]{margin:%?20?%}.main .orderInfo .title[data-v-4f2aced2]{font-size:%?32?%;margin:%?10?%;border-left:%?8?% solid #ed6622;font-weight:600;padding-left:%?16?%}.main .orderInfo .detail .list[data-v-4f2aced2]{padding:%?26?% %?8?%;border-bottom:1px solid #ebeef5;display:flex;justify-content:space-between;font-size:%?28?%}.main .orderInfo .detail .label[data-v-4f2aced2]{min-width:%?200?%;font-weight:700}.main .orderInfo .detail .value[data-v-4f2aced2]{word-break:break-all;max-width:calc(100% - %?200?%)}.main .empty[data-v-4f2aced2]{padding:%?100?% %?0?%;text-align:center}.main .empty uni-image[data-v-4f2aced2]{width:%?400?%;height:%?400?%}.main .location[data-v-4f2aced2]{margin:%?30?% 0;color:#ed6622}.success[data-v-4f2aced2]{margin:%?60?% auto;text-align:center;color:#e6a23c}.success .title[data-v-4f2aced2]{font-size:%?40?%;margin-bottom:%?30?%}.line[data-v-4f2aced2]{border-bottom:1px solid #ebeef5;padding:%?26?% %?8?%}.line-l[data-v-4f2aced2]{font-weight:700;font-size:%?28?%}.line-r[data-v-4f2aced2]{max-width:calc(100% - %?200?%);word-break:break-all;font-size:%?28?%}.phone-icon[data-v-4f2aced2]{margin-left:%?20?%}.uni-input[data-v-4f2aced2]{color:#999;margin:0 %?10?% 0 %?40?%}.loca-div[data-v-4f2aced2]{padding:%?36?% 0 %?24?%;color:#ed6622;font-size:%?28?%}.btn-div[data-v-4f2aced2]{display:flex;justify-content:space-between;padding:%?20?% 0}.btn[data-v-4f2aced2]{width:%?340?%;height:%?76?%;line-height:%?76?%;border-radius:%?48?%;margin:0;margin-left:%?16?%}.primary[data-v-4f2aced2]{color:#fff;border-color:#ed6622}.default[data-v-4f2aced2]{color:#606266;border-color:#dcdfe6}.map-div[data-v-4f2aced2]{height:%?400?%;width:100%}',""]),e.exports=a},"1e21":function(e,a,i){e.exports=i.p+"static/empty.jpg"},3294:function(e,a,i){"use strict";i.r(a);var t=i("bcf6"),r=i.n(t);for(var n in t)["default"].indexOf(n)<0&&function(e){i.d(a,e,(function(){return t[e]}))}(n);a["default"]=r.a},5638:function(e,a,i){"use strict";i.r(a);var t=i("109e"),r=i("3294");for(var n in r)["default"].indexOf(n)<0&&function(e){i.d(a,e,(function(){return r[e]}))}(n);i("bc8c");var s=i("828b"),c=Object(s["a"])(r["default"],t["b"],t["c"],!1,null,"4f2aced2",null,!1,t["a"],void 0);a["default"]=c.exports},bc8c:function(e,a,i){"use strict";var t=i("f93f"),r=i.n(t);r.a},bcf6:function(e,a,i){"use strict";i("6a54");var t=i("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=t(i("2634")),n=t(i("2fdc"));i("c223"),i("5c47"),i("a1c1");var s={data:function(){return{keywords:"",location:"定位中...",latitude:"",longitude:"",isArrive:!1,carNo:"",detail:"",empty:!1,arrivedTime:"",pickerArray:[],pickerIndex:0,covers:[{latitude:null,longitude:null,iconPath:"../../static/loca.png",width:30,height:30}],locationSuccess:!1,deliveryNo:""}},onLoad:function(e){this.carNo=e.carNo,e.deliveryNo&&(this.deliveryNo=e.deliveryNo,this.getOrders(e.deliveryNo)),this.getLocation(this,this.setMarker)},methods:{setMarker:function(e){console.log("设置marker"),e.covers[0].latitude=e.latitude,e.covers[0].longitude=e.longitude},bindPickerChange:function(e){console.log("picker发送选择改变，携带值为："+e.detail.value),this.pickerIndex=e.detail.value,this.carNo=this.pickerArray[this.pickerIndex].carNo},search:function(){uni.navigateTo({url:"../search/search?page=arrive&carNo=".concat(this.carNo,"&deliveryNo=").concat(this.deliveryNo)})},getOrders:function(e){var a=this;return(0,n.default)((0,r.default)().mark((function i(){var t,n,s,c,d,o;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.detail="",a.empty=!0,uni.showLoading({mask:!0}),i.next=5,a.api.post("getDeliveryInfo",{deliveryNo:e});case 5:if(t=i.sent,uni.hideLoading(),t){i.next=9;break}return i.abrupt("return");case 9:if(t.data){if(t.data.orderSignList&&t.data.orderSignList.length)for(n=0;n<t.data.orderSignList.length;n++)s=t.data.orderSignList[n],s.name=s.carNo,s.isComment||(s.name=s.carNo+"(未评价)"),s.isArrived&&(s.name=s.carNo+"(已送达)");if(a.pickerArray=t.data.orderSignList,a.carNo)for(c=0;c<a.pickerArray.length;c++)d=a.pickerArray[c],d.carNo==a.carNo&&(a.pickerIndex=c);else a.carNo=a.pickerArray[0].carNo;a.detail=t.data,a.isArrive=t.data.isArrived,o=new Date(t.data.arrivedTime).toLocaleString(),a.arrivedTime=o.replace(/[\u4e00-\u9fa5]/g,""),a.empty=!1}else a.empty=!0;case 10:case"end":return i.stop()}}),i)})))()},scanCode:function(){var e=this;uni.scanCode({success:function(a){console.log(a),"scanCode:ok"==a.errMsg&&(a.path||(a.path="pages/index/index?scene=7c46a61c40e84a16b04b742b7c0cb61d"),e.getQueryParams(a.path))},fail:function(e){console.log(e,"err")}})},getQueryParams:function(e){var a=this;return(0,n.default)((0,r.default)().mark((function i(){var t,n,s,c;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return uni.showLoading({title:"loading",mask:!0}),e=e.split("=")[1],i.next=4,a.api.post("getWechatCode",{id:e});case 4:if(t=i.sent,uni.hideLoading(),t){i.next=8;break}return i.abrupt("return");case 8:n=JSON.parse(t.data.params),s=n.carNo,c=n.deliveryNo,a.carNo=s,a.deliveryNo=c,a.keywords=c,a.getOrders(c);case 13:case"end":return i.stop()}}),i)})))()},arrive:function(){var e=this;uni.showModal({title:"提示",content:"是否确认收货？",success:function(){var a=(0,n.default)((0,r.default)().mark((function a(i){var t,n;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.confirm){a.next=13;break}return uni.showLoading({title:"loading"}),t={address:e.location,carNo:e.carNo,deliveryNo:e.deliveryNo,latitude:e.latitude,longitude:e.longitude},a.next=5,e.api.post("confirmArrived",t);case 5:if(n=a.sent,uni.hideLoading(),n){a.next=9;break}return a.abrupt("return");case 9:e.success("提交成功"),e.isArrive=!0,e.arrivedTime=n.data,setTimeout((function(){uni.redirectTo({url:"../myOrders/myOrders?active=6"})}),1500);case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()})},back:function(){uni.redirectTo({url:"../myOrders/myOrders?active=7"})}}};a.default=s},f93f:function(e,a,i){var t=i("1336");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var r=i("967d").default;r("67533ae6",t,!0,{sourceMap:!1,shadowMode:!1})}}]);