(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-arrive-arrive"],{"21a9":function(e,i,t){"use strict";t.d(i,"b",(function(){return r})),t.d(i,"c",(function(){return n})),t.d(i,"a",(function(){return a}));var a={uniIcons:t("f624").default},r=function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"main"},[e.detail?a("v-uni-view",{staticClass:"orderInfo"},[a("v-uni-view",{staticClass:"title"},[e._v("送货单信息")]),a("v-uni-view",{staticClass:"detail"},[a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[e._v("送货单编号")]),a("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.deliveryNo))])],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[e._v("物流单编号")]),a("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.orderChildNo))])],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[e._v("目的地")]),a("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.targetAreaName))])],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[e._v("客户简称")]),a("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.customerName))])],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[e._v("客户地址")]),a("v-uni-view",{staticClass:"value"},[e._v(e._s(e.detail.address))])],1),e.pickerArray.length?a("v-uni-view",{staticClass:"line d-flex jusb"},[a("v-uni-view",{staticClass:"line-l"},[e._v("车牌号码")]),a("v-uni-view",{staticClass:"line-r d-flex"},[a("v-uni-picker",{attrs:{value:e.pickerIndex,range:e.pickerArray,"range-key":"name"},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.bindPickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{},[a("v-uni-text",[e._v(e._s(e.pickerArray[e.pickerIndex].name))]),a("v-uni-text",{staticClass:"uni-input"},[e._v(e._s("共"+e.pickerArray.length+"辆"))])],1)],1),a("uni-icons",{attrs:{type:"arrowright",size:"12",color:"#999999"}})],1)],1):e._e(),e.pickerArray.length?a("v-uni-view",{staticClass:"line d-flex jusb"},[a("v-uni-view",{staticClass:"line-l"},[e._v("司机信息")]),a("v-uni-view",{staticClass:"line-r"},[a("v-uni-text",[e._v(e._s(e.pickerArray[e.pickerIndex].driverName))]),a("uni-icons",{staticClass:"phone-icon",attrs:{color:"#ed6622",type:"phone-filled",size:"16"}})],1)],1):e._e(),e.isArrive?a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"label"},[e._v("送达时间")]),a("v-uni-view",{staticClass:"value"},[e._v(e._s(e.arrivedTime))])],1):e._e()],1)],1):e._e(),e.empty?a("v-uni-view",{staticClass:"empty",staticStyle:{flex:"1"}},[a("v-uni-image",{attrs:{src:t("ef45"),mode:""}}),a("v-uni-view",{staticStyle:{margin:"10px 0px",color:"#ed6622"}},[e._v("暂无送货单信息")]),a("v-uni-view",{staticClass:"subtext"},[e._v("试试搜索送货单号")])],1):e._e(),e.isArrive?a("v-uni-view",{staticClass:"success"},[a("v-uni-view",{staticClass:"title"},[e._v("货物已经确认送达！")])],1):e._e(),a("v-uni-view",{staticClass:"loca-div"},[a("v-uni-text",[e._v("当前位置:"+e._s(e.location))])],1),a("v-uni-view",{staticClass:"map-div"},[a("v-uni-map",{staticStyle:{width:"100%",height:"100%"},attrs:{latitude:e.latitude,longitude:e.longitude,markers:e.covers,"enable-scroll":!1}})],1)],1),a("v-uni-view",{staticClass:"btn-div"},[e.detail?a("v-uni-button",{staticClass:"btn font14 default",attrs:{plain:"true"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.back.apply(void 0,arguments)}}},[e._v("稍后确认")]):e._e(),!e.isArrive&&e.detail&&e.latitude&&e.pickerArray[e.pickerIndex].isComment?a("v-uni-button",{staticClass:"btn font14 primary",attrs:{disabled:e.pickerArray[e.pickerIndex].isArrived},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.arrive.apply(void 0,arguments)}}},[e._v("确认送达")]):e._e()],1)],1)},n=[]},"5fff":function(e,i,t){var a=t("cb72");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=t("4f06").default;r("c13cfdba",a,!0,{sourceMap:!1,shadowMode:!1})},"62ea":function(e,i,t){"use strict";t.r(i);var a=t("d336"),r=t.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){t.d(i,e,(function(){return a[e]}))}(n);i["default"]=r.a},"652e":function(e,i,t){"use strict";var a=t("5fff"),r=t.n(a);r.a},cb72:function(e,i,t){var a=t("24fb");i=a(!1),i.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-ec935e2e]{padding:%?20?%;display:flex;flex-direction:column;height:100vh;border-top:1px solid #ebeef5;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.header[data-v-ec935e2e]{padding:10px;position:relative}.header .searchIcon[data-v-ec935e2e]{position:absolute;left:20px;top:15px}.header .scanIcon[data-v-ec935e2e]{position:absolute;right:20px;top:15px}.header .search[data-v-ec935e2e]{border:1px solid #ebeef5;border-radius:18px;height:32px;line-height:32px;padding-left:33px;padding-right:40px}.main[data-v-ec935e2e]{width:100%;margin:0 auto;flex:1;overflow-y:auto}.main .msg[data-v-ec935e2e]{color:#555}.main .orderInfo[data-v-ec935e2e]{margin:%?20?%}.main .orderInfo .title[data-v-ec935e2e]{font-size:%?32?%;margin:%?10?%;border-left:%?8?% solid #ed6622;font-weight:600;padding-left:%?16?%}.main .orderInfo .detail .list[data-v-ec935e2e]{padding:%?26?% %?8?%;border-bottom:1px solid #ebeef5;display:flex;justify-content:space-between;font-size:%?28?%}.main .orderInfo .detail .label[data-v-ec935e2e]{min-width:%?200?%;font-weight:700}.main .orderInfo .detail .value[data-v-ec935e2e]{word-break:break-all;max-width:calc(100% - %?200?%)}.main .empty[data-v-ec935e2e]{padding:%?100?% %?0?%;text-align:center}.main .empty uni-image[data-v-ec935e2e]{width:%?400?%;height:%?400?%}.main .location[data-v-ec935e2e]{margin:%?30?% 0;color:#ed6622}.success[data-v-ec935e2e]{margin:%?60?% auto;text-align:center;color:#e6a23c}.success .title[data-v-ec935e2e]{font-size:%?40?%;margin-bottom:%?30?%}.line[data-v-ec935e2e]{border-bottom:1px solid #ebeef5;padding:%?26?% %?8?%}.line-l[data-v-ec935e2e]{font-weight:700;font-size:%?28?%}.line-r[data-v-ec935e2e]{max-width:calc(100% - %?200?%);word-break:break-all;font-size:%?28?%}.phone-icon[data-v-ec935e2e]{margin-left:%?20?%}.uni-input[data-v-ec935e2e]{color:#999;margin:0 %?10?% 0 %?40?%}.loca-div[data-v-ec935e2e]{padding:%?36?% 0 %?24?%;color:#ed6622;font-size:%?28?%}.btn-div[data-v-ec935e2e]{display:flex;justify-content:space-between;padding:%?20?% 0}.btn[data-v-ec935e2e]{width:%?340?%;height:%?76?%;line-height:%?76?%;border-radius:%?48?%;margin:0;margin-left:%?16?%}.primary[data-v-ec935e2e]{color:#fff;border-color:#ed6622}.default[data-v-ec935e2e]{color:#606266;border-color:#dcdfe6}.map-div[data-v-ec935e2e]{height:%?400?%;width:100%}',""]),e.exports=i},d336:function(e,i,t){"use strict";t("7a82");var a=t("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=a(t("c7eb")),n=a(t("1da1"));t("99af"),t("ac1f"),t("5319");var s={data:function(){return{keywords:"",location:"定位中...",latitude:"",longitude:"",isArrive:!1,carNo:"",detail:"",empty:!1,arrivedTime:"",pickerArray:[],pickerIndex:0,covers:[{latitude:null,longitude:null,iconPath:"../../static/loca.png",width:30,height:30}],locationSuccess:!1,deliveryNo:""}},onLoad:function(e){this.carNo=e.carNo,e.deliveryNo&&(this.deliveryNo=e.deliveryNo,this.getOrders(e.deliveryNo)),this.getLocation(this,this.setMarker)},methods:{setMarker:function(e){console.log("设置marker"),e.covers[0].latitude=e.latitude,e.covers[0].longitude=e.longitude},bindPickerChange:function(e){console.log("picker发送选择改变，携带值为："+e.detail.value),this.pickerIndex=e.detail.value,this.carNo=this.pickerArray[this.pickerIndex].carNo},search:function(){uni.navigateTo({url:"../search/search?page=arrive&carNo=".concat(this.carNo,"&deliveryNo=").concat(this.deliveryNo)})},getOrders:function(e){var i=this;return(0,n.default)((0,r.default)().mark((function t(){var a,n,s,c,o,d;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i.detail="",i.empty=!0,uni.showLoading({mask:!0}),t.next=5,i.api.post("getDeliveryInfo",{deliveryNo:e});case 5:if(a=t.sent,uni.hideLoading(),a){t.next=9;break}return t.abrupt("return");case 9:if(a.data){if(a.data.orderSignList&&a.data.orderSignList.length)for(n=0;n<a.data.orderSignList.length;n++)s=a.data.orderSignList[n],s.name=s.carNo,s.isComment||(s.name=s.carNo+"(未评价)"),s.isArrived&&(s.name=s.carNo+"(已送达)");if(i.pickerArray=a.data.orderSignList,i.carNo)for(c=0;c<i.pickerArray.length;c++)o=i.pickerArray[c],o.carNo==i.carNo&&(i.pickerIndex=c);else i.carNo=i.pickerArray[0].carNo;i.detail=a.data,i.isArrive=a.data.isArrived,d=new Date(a.data.arrivedTime).toLocaleString(),i.arrivedTime=d.replace(/[\u4e00-\u9fa5]/g,""),i.empty=!1}else i.empty=!0;case 10:case"end":return t.stop()}}),t)})))()},scanCode:function(){var e=this;uni.scanCode({success:function(i){console.log(i),"scanCode:ok"==i.errMsg&&(i.path||(i.path="pages/index/index?scene=7c46a61c40e84a16b04b742b7c0cb61d"),e.getQueryParams(i.path))},fail:function(e){console.log(e,"err")}})},getQueryParams:function(e){var i=this;return(0,n.default)((0,r.default)().mark((function t(){var a,n,s,c;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"loading",mask:!0}),e=e.split("=")[1],t.next=4,i.api.post("getWechatCode",{id:e});case 4:if(a=t.sent,uni.hideLoading(),a){t.next=8;break}return t.abrupt("return");case 8:n=JSON.parse(a.data.params),s=n.carNo,c=n.deliveryNo,i.carNo=s,i.deliveryNo=c,i.keywords=c,i.getOrders(c);case 13:case"end":return t.stop()}}),t)})))()},arrive:function(){var e=this;uni.showModal({title:"提示",content:"是否确认收货？",success:function(){var i=(0,n.default)((0,r.default)().mark((function i(t){var a,n;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t.confirm){i.next=13;break}return uni.showLoading({title:"loading"}),a={address:e.location,carNo:e.carNo,deliveryNo:e.deliveryNo,latitude:e.latitude,longitude:e.longitude},i.next=5,e.api.post("confirmArrived",a);case 5:if(n=i.sent,uni.hideLoading(),n){i.next=9;break}return i.abrupt("return");case 9:e.success("提交成功"),e.isArrive=!0,e.arrivedTime=n.data,setTimeout((function(){uni.redirectTo({url:"../myOrders/myOrders?active=6"})}),1500);case 13:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()})},back:function(){uni.redirectTo({url:"../myOrders/myOrders?active=7"})}}};i.default=s},ee66:function(e,i,t){"use strict";t.r(i);var a=t("21a9"),r=t("62ea");for(var n in r)["default"].indexOf(n)<0&&function(e){t.d(i,e,(function(){return r[e]}))}(n);t("652e");var s=t("f0c5"),c=Object(s["a"])(r["default"],a["b"],a["c"],!1,null,"ec935e2e",null,!1,a["a"],void 0);i["default"]=c.exports},ef45:function(e,i,t){e.exports=t.p+"static/img/empty.16a9478c.jpg"}}]);